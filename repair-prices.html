<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Repair Price Calculators</title>

<style>
:root{
  --bg:#f1f5f9;
  --panel:#ffffff;
  --border:#e5e7eb;
  --text:#0f172a;
  --muted:#64748b;
  --blue:#2563eb;
  --green:#16a34a;
  --amber:#f59e0b;
  --red:#dc2626;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Inter,system-ui;
  background:var(--bg);
  padding:28px 16px;
  color:var(--text);
}

.wrapper{
  max-width:1200px;
  margin:auto;
}

h1{
  text-align:center;
  margin-bottom:4px;
}

.tagline{
  text-align:center;
  font-weight:700;
  margin-bottom:26px;
}

.tagline a{
  color:var(--blue);
  text-decoration:none;
}

/* GRID */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:18px;
}

/* CARD */
.card{
  background:var(--panel);
  border-radius:18px;
  padding:20px;
  box-shadow:0 20px 40px rgba(0,0,0,.08);
  display:flex;
  flex-direction:column;
  align-items:center;
}

/* HEADER AREA */
.card-header{
  min-height:260px;
  width:100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  text-align:center;
}

/* TITLES */
.card h2{
  margin:0 0 6px;
}

/* Dropdown + placeholder */
select,
.device-placeholder{
  margin-top:10px;
  padding:9px;
  width:85%;
  border-radius:10px;
  border:1px solid var(--border);
  font-size:14px;
  height:40px;
  display:flex;
  align-items:center;
  justify-content:center;
  background:#f8fafc;
  color:#475569;
}

/* FX5 info (reserve height) */
.fx5-info{
  min-height:36px;
  margin-top:8px;
  font-size:12px;
  color:var(--muted);
}

/* Customer warning */
.customer-warning{
  font-size:12px;
  color:var(--red);
  margin-top:8px;
  display:none;
  text-align:left;
}

/* Warning note title */
.customer-warning .note-title{
  font-weight:700;
  display:block;
  margin-bottom:3px;
}

/* ⚠️ triangle before warning */
.customer-warning .triangle{
  display:inline;
  margin-right:4px;
}

/* INPUT */
input{
  margin-top:14px;
  width:85%;
  padding:10px;
  border-radius:10px;
  border:1px solid var(--border);
  font-size:15px;
}

/* OUTPUT */
.output{
  margin-top:12px;
  font-weight:700;
  color:var(--blue);
}

/* MARGIN */
.margin{
  margin-top:6px;
  font-size:13px;
  font-weight:700;
}

.margin.red{color:var(--red);}
.margin.red::before{content:"⚠️ ";}
.margin.amber{color:var(--amber);}
.margin.green{color:var(--green);}

/* TIME */
.time{
  margin-top:6px;
  font-size:12px;
  color:var(--muted);
  font-weight:600;
}
</style>
</head>

<body>
<div class="wrapper">

<h1>Repair Price Calculators</h1>
<div class="tagline">
  Use replacebase.co.uk for parts cost. Console prices are from the website here:
  <a href="https://cnlsrepair.co.uk/repairs/console-repairs/" target="_blank">Console Prices</a>
</div>

<div class="grid">

<!-- LCD SCREEN -->
<div class="card">
  <div class="card-header">
    <h2>LCD Screen Repair</h2>
    <div class="device-placeholder">iPhone Only</div>
    <div class="fx5-info">Only use the red FX5 Screen option cost here</div>
    <div class="customer-warning">
      <span class="note-title">Note to Customer:</span>
      <span class="triangle">⚠️</span>
      You may see a message on the iPhone saying the replacement part can’t be verified.
      This is normal as Apple parts are paired to the motherboard when manufactured.
      The message may appear at times and disappears after 7 days.
    </div>
  </div>
  <input type="number" placeholder="Parts cost (£)" oninput="calc(this,130)">
  <div class="output"></div>
  <div class="margin"></div>
  <div class="time"></div>
</div>

<!-- OLED SCREEN -->
<div class="card">
  <div class="card-header">
    <h2>OLED Screen Repair</h2>
    <select class="device-select" onchange="updateWarnings()">
      <option value="iPhone">iPhone</option>
      <option value="Android">Android</option>
    </select>
    <div class="fx5-info">Only use the purple FX5 Screen option cost here - iPhone</div>
    <div class="customer-warning">
      <span class="note-title">Note to Customer:</span>
      <span class="triangle">⚠️</span>
      You may see a message on the iPhone saying the replacement part can’t be verified.
      This is normal as Apple parts are paired to the motherboard when manufactured.
      The message may appear at times and disappears after 7 days.
    </div>
  </div>
  <input type="number" placeholder="Parts cost (£)" oninput="calc(this,45)">
  <div class="output"></div>
  <div class="margin"></div>
  <div class="time"></div>
</div>

<!-- BATTERY -->
<div class="card">
  <div class="card-header">
    <h2>Battery Repair</h2>
    <select class="device-select" onchange="updateWarnings()">
      <option value="iPhone">iPhone</option>
      <option value="Android">Android</option>
    </select>
    <div class="fx5-info"></div>
    <div class="customer-warning">
      <span class="note-title">Note to Customer:</span>
      <span class="triangle">⚠️</span>
      You may see a message on the iPhone saying the replacement part can’t be verified.
      This is normal as Apple parts are paired to the motherboard when manufactured.
      The message may appear at times and disappears after 7 days.
    </div>
  </div>
  <input type="number" placeholder="Parts cost (£)" oninput="calc(this,115)">
  <div class="output"></div>
  <div class="margin"></div>
  <div class="time"></div>
</div>

<!-- CHARGING PORT -->
<div class="card">
  <div class="card-header">
    <h2>Charging Port Repair</h2>
    <select class="device-select" onchange="updateWarnings()">
      <option value="iPhone">iPhone</option>
      <option value="Android">Android</option>
    </select>
    <div class="fx5-info"></div>
    <div class="customer-warning">
      <span class="note-title">Note to Customer:</span>
      <span class="triangle">⚠️</span>
      You may see a message on the iPhone saying the replacement part can’t be verified.
      This is normal as Apple parts are paired to the motherboard when manufactured.
      The message may appear at times and disappears after 7 days.
    </div>
  </div>
  <input type="number" placeholder="Parts cost (£)" oninput="calc(this,80)">
  <div class="output"></div>
  <div class="margin"></div>
  <div class="time"></div>
</div>

</div>
</div>

<script>
function roundTo5(n){
  return Math.round(n / 5) * 5;
}

function calc(input, percent){
  const cost = parseFloat(input.value || 0);
  const shipping = 3;

  const rawPrice = (cost + shipping) * (1 + percent / 100);
  const price = roundTo5(rawPrice);
  const margin = price - cost - shipping;

  const card = input.closest('.card');
  const output = card.querySelector('.output');
  const m = card.querySelector('.margin');
  const timeEl = card.querySelector('.time');
  const warn = card.querySelector('.customer-warning');

  output.innerText = `Quote Price: £${price}`;

  let label = "";
  let colour = "";

  if (margin < 10) {
    label = "Avoid Quote";
    colour = "red";
  } else if (margin < 20) {
    label = "Ok Quote";
    colour = "amber";
  } else {
    label = "Good Quote";
    colour = "green";
  }

  m.innerText = `Margin: £${margin.toFixed(2)} — ${label}`;
  m.className = `margin ${colour}`;

  // Show warning for iPhone tiles or LCD (no select)
  if(warn){
    const select = card.querySelector(".device-select");
    const device = select ? select.value : "iPhone";
    warn.style.display = device === "iPhone" ? "block" : "none";
  }

  // Repair time logic
  let hours = "—";
  const title = card.querySelector("h2").innerText;
  const deviceSelect = card.querySelector(".device-select");
  const device = deviceSelect ? deviceSelect.value : "iPhone";

  if (title.includes("LCD")) hours = "1 hour";
  if (title.includes("OLED")) hours = device === "iPhone" ? "1 hour" : "1.5 hours";
  if (title.includes("Battery")) hours = "1 hour";
  if (title.includes("Charging")) hours = device === "iPhone" ? "2 hours" : "1 hour";

  timeEl.innerText = `Estimated repair time: ${hours}`;
}

// Show iPhone warning messages on dropdown change
function updateWarnings(){
  document.querySelectorAll('.card').forEach(card=>{
    const warn = card.querySelector('.customer-warning');
    if(!warn) return;
    const select = card.querySelector('.device-select');
    const device = select ? select.value : "iPhone";
    warn.style.display = device === "iPhone" ? "block" : "none";
  });
}

// Run on page load
updateWarnings();
</script>

</body>
</html>
