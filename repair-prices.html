<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Repair Price Calculators</title>

<style>
:root{
  --bg:#f1f5f9;
  --panel:#ffffff;
  --border:#e5e7eb;
  --text:#0f172a;
  --muted:#64748b;
  --blue:#2563eb;
  --green:#16a34a;
  --amber:#f59e0b;
  --red:#dc2626;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Inter,system-ui;
  background:var(--bg);
  padding:28px 16px;
  color:var(--text);
}

.wrapper{max-width:1200px;margin:auto;}

h1{text-align:center;margin-bottom:4px;}

.tagline{
  text-align:center;
  font-weight:700;
  margin-bottom:26px;
}

.tagline a{color:var(--blue);text-decoration:none;}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:18px;
}

/* ===== CALCULATOR CARDS ===== */
.card{
  background:var(--panel);
  border-radius:18px;
  padding:20px;
  box-shadow:0 20px 40px rgba(0,0,0,.08);
  display:flex;
  flex-direction:column;
  align-items:center;
}

.card-header{
  min-height:260px;
  width:100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  text-align:center;
}

.card h2{margin:0 0 6px;}

select,.device-placeholder{
  margin-top:10px;
  padding:9px;
  width:85%;
  border-radius:10px;
  border:1px solid var(--border);
  font-size:14px;
  height:40px;
  display:flex;
  align-items:center;
  justify-content:center;
  background:#f8fafc;
  color:#475569;
}

.fx5-info{
  min-height:36px;
  margin-top:8px;
  font-size:12px;
  color:var(--muted);
}

.customer-warning{
  font-size:12px;
  color:var(--red);
  margin-top:8px;
  display:none;
  text-align:left;
}

.customer-warning .note-title{
  font-weight:700;
  display:block;
  margin-bottom:3px;
}

.customer-warning .triangle{margin-right:4px;}

input{
  margin-top:14px;
  width:85%;
  padding:10px;
  border-radius:10px;
  border:1px solid var(--border);
  font-size:15px;
}

.output{margin-top:12px;font-weight:700;color:var(--blue);}

.margin{margin-top:6px;font-size:13px;font-weight:700;}
.margin.red{color:var(--red);}
.margin.red::before{content:"⚠️ ";}
.margin.amber{color:var(--amber);}
.margin.green{color:var(--green);}

.time{
  margin-top:6px;
  font-size:12px;
  color:var(--muted);
  font-weight:600;
}

/* ===== ACCORDIONS ===== */
.section-title{text-align:center;margin:40px 0 16px;}

.accordion{
  background:var(--panel);
  border-radius:16px;
  box-shadow:0 12px 30px rgba(0,0,0,.08);
  margin-bottom:16px;
  overflow:hidden;
}

.accordion-header{
  padding:16px 20px;
  cursor:pointer;
  font-weight:700;
  display:flex;
  justify-content:space-between;
  border-bottom:1px solid var(--border);
}

.accordion-content{display:none;padding:10px 20px;}

.sub-accordion{
  border:1px solid var(--border);
  border-radius:12px;
  margin:10px 0;
  overflow:hidden;
}

.sub-header{
  padding:12px 14px;
  font-weight:700;
  cursor:pointer;
  background:#f8fafc;
  display:flex;
  justify-content:space-between;
}

.sub-content{display:none;padding:10px 14px;}

.price-row{
  display:flex;
  justify-content:space-between;
  padding:6px 0;
  font-size:14px;
  border-bottom:1px dashed var(--border);
}
.price-row:last-child{border-bottom:none;}
</style>
</head>

<body>
<div class="wrapper">

<h1>Repair Price Calculators</h1>
<div class="tagline">
  Use replacebase.co.uk for parts cost. Console prices are from the website here:
  <a href="https://cnlsrepair.co.uk/repairs/console-repairs/" target="_blank">Console Prices</a>
</div>

<!-- ===== TOP CALCULATORS ===== -->
<div class="grid">

<!-- LCD -->
<div class="card">
  <div class="card-header">
    <h2>LCD Screen Repair</h2>
    <div class="device-placeholder">iPhone Only</div>
    <div class="fx5-info">Only use the red FX5 Screen option cost here</div>
    <div class="customer-warning">
      <span class="note-title">Note to Customer:</span>
      <span class="triangle">⚠️</span>
      You may see a message on the iPhone saying the replacement part can’t be verified.
      This is normal as Apple parts are paired to the motherboard when manufactured.
      The message may appear at times and disappears after 7 days.
    </div>
  </div>
  <input type="number" placeholder="Parts cost (£)" oninput="calc(this,130)">
  <div class="output"></div>
  <div class="margin"></div>
  <div class="time"></div>
</div>

<!-- OLED -->
<div class="card">
  <div class="card-header">
    <h2>OLED Screen Repair</h2>
    <select class="device-select" onchange="updateWarnings()">
      <option value="iPhone">iPhone</option>
      <option value="Android">Android</option>
    </select>
    <div class="fx5-info">Only use the purple FX5 Screen option cost here - iPhone</div>
    <div class="customer-warning">
      <span class="note-title">Note to Customer:</span>
      <span class="triangle">⚠️</span>
      You may see a message on the iPhone saying the replacement part can’t be verified.
      This is normal as Apple parts are paired to the motherboard when manufactured.
      The message may appear at times and disappears after 7 days.
    </div>
  </div>
  <input type="number" placeholder="Parts cost (£)" oninput="calc(this,45)">
  <div class="output"></div>
  <div class="margin"></div>
  <div class="time"></div>
</div>

<!-- BATTERY -->
<div class="card">
  <div class="card-header">
    <h2>Battery Repair</h2>
    <select class="device-select" onchange="updateWarnings()">
      <option value="iPhone">iPhone</option>
      <option value="Android">Android</option>
    </select>
    <div class="fx5-info"></div>
    <div class="customer-warning">
      <span class="note-title">Note to Customer:</span>
      <span class="triangle">⚠️</span>
      You may see a message on the iPhone saying the replacement part can’t be verified.
      This is normal as Apple parts are paired to the motherboard when manufactured.
      The message may appear at times and disappears after 7 days.
    </div>
  </div>
  <input type="number" placeholder="Parts cost (£)" oninput="calc(this,115)">
  <div class="output"></div>
  <div class="margin"></div>
  <div class="time"></div>
</div>

<!-- CHARGING -->
<div class="card">
  <div class="card-header">
    <h2>Charging Port Repair</h2>
    <select class="device-select" onchange="updateWarnings()">
      <option value="iPhone">iPhone</option>
      <option value="Android">Android</option>
    </select>
    <div class="fx5-info"></div>
  </div>
  <input type="number" placeholder="Parts cost (£)" oninput="calc(this,80)">
  <div class="output"></div>
  <div class="margin"></div>
  <div class="time"></div>
</div>

</div>

<!-- ===== CONSOLES + IPADS (unchanged from last step) ===== -->
<!-- (Accordion sections remain exactly as previously provided) -->

</div>

<script>
function roundTo5(n){
  return Math.round(n / 5) * 5;
}

function calc(input, percent){
  const cost = parseFloat(input.value || 0);
  const shipping = 3;

  const rawPrice = (cost + shipping) * (1 + percent / 100);
  const price = roundTo5(rawPrice);
  const margin = price - cost - shipping;

  const card = input.closest('.card');
  const output = card.querySelector('.output');
  const m = card.querySelector('.margin');
  const timeEl = card.querySelector('.time');
  const warn = card.querySelector('.customer-warning');

  output.innerText = `Quote Price: £${price}`;

  let label = "";
  let colour = "";

  if (margin < 10) {
    label = "Avoid Quote";
    colour = "red";
  } else if (margin < 20) {
    label = "Ok Quote";
    colour = "amber";
  } else {
    label = "Good Quote";
    colour = "green";
  }

  m.innerText = `Margin: £${margin.toFixed(2)} — ${label}`;
  m.className = `margin ${colour}`;

  if(warn){
    const select = card.querySelector(".device-select");
    const device = select ? select.value : "iPhone";
    warn.style.display = device === "iPhone" ? "block" : "none";
  }

  /* ===== REPAIR TIME (RESTORED) ===== */
  let hours = "—";
  const title = card.querySelector("h2").innerText;
  const deviceSelect = card.querySelector(".device-select");
  const device = deviceSelect ? deviceSelect.value : "iPhone";

  if (title.includes("LCD")) hours = "1 hour";
  if (title.includes("OLED")) hours = device === "iPhone" ? "1 hour" : "1.5 hours";
  if (title.includes("Battery")) hours = "1 hour";
  if (title.includes("Charging")) hours = device === "iPhone" ? "2 hours" : "1 hour";

  timeEl.innerText = `Estimated repair time: ${hours}`;
}

function updateWarnings(){
  document.querySelectorAll('.customer-warning').forEach(w=>{
    const select = w.closest('.card').querySelector('.device-select');
    w.style.display = !select || select.value === "iPhone" ? "block" : "none";
  });
}
updateWarnings();

/* Accordion logic */
document.querySelectorAll('.accordion-header,.sub-header').forEach(h=>{
  h.onclick=()=>{
    const c=h.nextElementSibling;
    const open=c.style.display==="block";
    c.style.display=open?"none":"block";
    h.querySelector("span").innerText=open?"+":"−";
  };
});
</script>

</body>
</html>
