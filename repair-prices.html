<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Repair Prices</title>

<style>
:root{
  --bg:#f1f5f9;
  --panel:#ffffff;
  --border:#e5e7eb;
  --text:#0f172a;
  --muted:#64748b;
  --blue:#2563eb;
  --green:#16a34a;
  --amber:#f59e0b;
  --red:#dc2626;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Inter,system-ui;
  background:var(--bg);
  padding:20px 14px;
  color:var(--text);
}

.wrapper{
  max-width:1200px;
  margin:auto;
}

h1{
  text-align:center;
  font-size:24px;
  margin-bottom:6px;
}

.tagline{
  text-align:center;
  font-weight:700;
  font-size:14px;
  margin-bottom:22px;
}

.calculators{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:18px;
}

@media (max-width: 900px){
  .calculators{grid-template-columns:1fr;}
}

.card{
  background:var(--panel);
  border-radius:18px;
  padding:18px;
  box-shadow:0 10px 28px rgba(0,0,0,.1);
  display:flex;
  flex-direction:column;
  gap:14px;
}

.card-header{text-align:center}

.card h2{
  font-size:18px;
  margin:0;
}

.card-subtitle{
  font-size:13px;
  color:var(--muted);
  font-weight:600;
}

.card-info{
  font-size:12px;
  color:var(--muted);
  line-height:1.4;
}

.card input{
  width:100%;
  padding:14px;
  font-size:18px;
  border-radius:10px;
  border:1px solid var(--border);
  text-align:right;
}

.result-box{
  background:#f8fafc;
  border-radius:14px;
  padding:12px;
  text-align:center;
}

.quote-label{
  font-size:12px;
  font-weight:700;
  color:var(--muted);
}

.quote{
  font-size:26px;
  font-weight:800;
  color:var(--blue);
}

.margin{
  margin-top:6px;
  font-size:14px;
  font-weight:700;
}

.margin.good{color:var(--green)}
.margin.warn{color:var(--amber)}
.margin.bad{color:var(--red)}

.margin-note{
  font-size:12px;
  font-weight:700;
  margin-top:4px;
}

.back-btn{
  display:inline-block;
  margin-bottom:14px;
  padding:10px 16px;
  border-radius:10px;
  background:#e5e7eb;
  color:var(--text);
  text-decoration:none;
  font-weight:600;
}
</style>
</head>

<body>
<div class="wrapper">

  <a href="index.html" class="back-btn">← Back</a>

  <h1>Repair Price Calculators</h1>
  <div class="tagline">
    Use replacebase.co.uk for parts cost. Console prices are from the website here:
    <a href="https://cnlsrepair.co.uk/repairs/console-repairs/" target="_blank">Console Prices</a>
  </div>

  <div class="calculators">

    <!-- LCD -->
    <div class="card">
      <div class="card-header">
        <h2>LCD Screen Repair</h2>
        <div class="card-subtitle">iPhone Only</div>
        <div class="card-info">Only use the red FX5 Screen option cost here</div>
      </div>
      <input type="number" inputmode="decimal" placeholder="Parts cost (£)" data-percent="130">
      <div class="result-box">
        <div class="quote-label">Quote Price</div>
        <div class="quote">—</div>
        <div class="margin"></div>
        <div class="margin-note"></div>
      </div>
    </div>

    <!-- OLED -->
    <div class="card">
      <div class="card-header">
        <h2>OLED Screen Repair</h2>
        <div class="card-info">Only use the purple FX5 Screen option cost here - iPhone</div>
      </div>
      <input type="number" inputmode="decimal" placeholder="Parts cost (£)" data-percent="45">
      <div class="result-box">
        <div class="quote-label">Quote Price</div>
        <div class="quote">—</div>
        <div class="margin"></div>
        <div class="margin-note"></div>
      </div>
    </div>

    <!-- Battery -->
    <div class="card">
      <div class="card-header">
        <h2>Battery Repair</h2>
      </div>
      <input type="number" inputmode="decimal" placeholder="Parts cost (£)" data-percent="115">
      <div class="result-box">
        <div class="quote-label">Quote Price</div>
        <div class="quote">—</div>
        <div class="margin"></div>
        <div class="margin-note"></div>
      </div>
    </div>

    <!-- Charging -->
    <div class="card">
      <div class="card-header">
        <h2>Charging Port Repair</h2>
      </div>
      <input type="number" inputmode="decimal" placeholder="Parts cost (£)" data-percent="80">
      <div class="result-box">
        <div class="quote-label">Quote Price</div>
        <div class="quote">—</div>
        <div class="margin"></div>
        <div class="margin-note"></div>
      </div>
    </div>

  </div>
</div>

<script>
const SHIPPING = 3;

// New margin thresholds (£)
const RED_MAX = 9;
const AMBER_MAX = 19;

function roundToNearest5(v){
  return Math.round(v / 5) * 5;
}

document.querySelectorAll('.card input').forEach(input => {
  input.addEventListener('input', e => {
    const percent = Number(e.target.dataset.percent);
    const parts = Number(e.target.value) || 0;

    const rawQuote = parts + (parts * percent / 100) + SHIPPING;
    const quote = roundToNearest5(rawQuote);

    const costTotal = parts + SHIPPING;
    const marginValue = quote - costTotal;

    const box = e.target.nextElementSibling;
    const marginEl = box.querySelector('.margin');
    const noteEl = box.querySelector('.margin-note');

    box.querySelector('.quote').innerText = `£${quote}`;
    marginEl.innerText = `Margin: £${marginValue}`;

    marginEl.className = "margin";
    noteEl.innerText = "";

    if (marginValue <= RED_MAX){
      marginEl.classList.add("bad");
      noteEl.innerText = "Margin too low – reconsider quote";
      noteEl.style.color = "var(--red)";
    } 
    else if (marginValue <= AMBER_MAX){
      marginEl.classList.add("warn");
      noteEl.innerText = "Low margin";
      noteEl.style.color = "var(--amber)";
    } 
    else {
      marginEl.classList.add("good");
      noteEl.innerText = "Healthy margin";
      noteEl.style.color = "var(--green)";
    }
  });
});
</script>
</body>
</html>