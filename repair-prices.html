<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Repair Price Calculators</title>
<style>
body{
  margin:0;
  font-family:Inter,system-ui;
  background:#f1f5f9;
  padding:20px;
  color:#0f172a;
}
.wrapper{
  max-width:1200px;
  margin:auto;
  text-align:center;
}
h1{
  margin-bottom:5px;
}
.tagline{
  font-weight:bold;
  margin-bottom:20px;
  font-size:14px;
}
.calculators{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:16px;
}
.card{
  background:#ffffff;
  border-radius:16px;
  padding:20px;
  display:flex;
  flex-direction:column;
  align-items:center;
  box-shadow:0 10px 20px rgba(0,0,0,.1);
}
.card h2{
  margin:10px 0 5px;
}
.card small{
  color:#64748b;
}
input[type="number"], select{
  margin-top:10px;
  padding:8px;
  width:80%;
  border-radius:8px;
  border:1px solid #e5e7eb;
}
.result{
  margin-top:10px;
  font-weight:600;
  font-size:18px;
}
.margin{
  margin-top:5px;
  font-size:14px;
}
.margin.red{color:#dc2626;}
.margin.amber{color:#f59e0b;}
.margin.green{color:#16a34a;}
.labour{
  margin-top:5px;
  font-size:13px;
  color:#2563eb;
}
.info{
  margin-top:5px;
  font-size:12px;
  color:#64748b;
}
</style>
</head>
<body>

<div class="wrapper">
  <h1>Repair Price Calculators</h1>
  <div class="tagline">Use replacebase.co.uk for parts cost. Console prices are from the website here: <a href="https://cnlsrepair.co.uk/repairs/console-repairs/" target="_blank">Console Prices</a></div>

  <div class="calculators">
    <!-- LCD Screen Repair -->
    <div class="card">
      <h2>LCD Screen Repair</h2>
      <small>iPhone Only</small>
      <div class="info">Only use the red FX5 Screen option cost here</div>
      <input type="number" placeholder="Parts cost (£)" class="partsCost" data-repair="lcd">
      <div class="result" id="lcdResult">Quote: £0</div>
      <div class="margin" id="lcdMargin">Margin: £0</div>
      <div class="labour" id="lcdLabour">Labour estimate: 1 hr</div>
    </div>

    <!-- OLED Screen Repair -->
    <div class="card">
      <h2>OLED Screen Repair</h2>
      <select id="oledDevice">
        <option value="iPhone">iPhone</option>
        <option value="Android">Android</option>
      </select>
      <div class="info">Only use the purple FX5 Screen option cost here - iPhone</div>
      <input type="number" placeholder="Parts cost (£)" class="partsCost" data-repair="oled">
      <div class="result" id="oledResult">Quote: £0</div>
      <div class="margin" id="oledMargin">Margin: £0</div>
      <div class="labour" id="oledLabour">Labour estimate: 1 hr</div>
    </div>

    <!-- Battery Repair -->
    <div class="card">
      <h2>Battery Repair</h2>
      <select id="batteryDevice">
        <option value="iPhone">iPhone</option>
        <option value="Android">Android</option>
      </select>
      <input type="number" placeholder="Parts cost (£)" class="partsCost" data-repair="battery">
      <div class="result" id="batteryResult">Quote: £0</div>
      <div class="margin" id="batteryMargin">Margin: £0</div>
      <div class="labour" id="batteryLabour">Labour estimate: 1 hr</div>
    </div>

    <!-- Charging Port Repair -->
    <div class="card">
      <h2>Charging Port Repair</h2>
      <select id="chargingDevice">
        <option value="iPhone">iPhone</option>
        <option value="Android">Android</option>
      </select>
      <input type="number" placeholder="Parts cost (£)" class="partsCost" data-repair="charging">
      <div class="result" id="chargingResult">Quote: £0</div>
      <div class="margin" id="chargingMargin">Margin: £0</div>
      <div class="labour" id="chargingLabour">Labour estimate: 2 hr</div>
    </div>

  </div>
</div>

<script>
const repairConfig = {
  lcd: { percentage: 130, labour: 1, deviceDependent:false },
  oled: { percentage: 45, labour: { iPhone:1, Android:1.5 }, deviceDependent:true },
  battery: { percentage:115, labour: { iPhone:1, Android:1 }, deviceDependent:true },
  charging: { percentage:80, labour: { iPhone:2, Android:1 }, deviceDependent:true },
};

function roundToNearest5(x){
  return Math.round(x/5)*5;
}

function calculateQuote(repair, partsCost, device=null){
  const config = repairConfig[repair];
  let quote = partsCost * (1 + config.percentage/100) + 3; // +£3 shipping
  quote = roundToNearest5(quote);
  const margin = quote - partsCost;
  let labourTime = config.deviceDependent ? config.labour[device] : config.labour;
  return {quote, margin, labourTime};
}

function updateCard(repair){
  let partsInput = document.querySelector(`.partsCost[data-repair="${repair}"]`);
  let device = null;
  if(repairConfig[repair].deviceDependent){
    device = document.getElementById(`${repair}Device`).value;
  }
  const partsCost = parseFloat(partsInput.value) || 0;
  const {quote, margin, labourTime} = calculateQuote(repair, partsCost, device);

  document.getElementById(`${repair}Result`).innerText = `Quote: £${quote}`;
  let marginEl = document.getElementById(`${repair}Margin`);
  marginEl.innerText = `Margin: £${margin}`;
  if(margin<10) marginEl.className='margin red';
  else if(margin<20) marginEl.className='margin amber';
  else marginEl.className='margin green';

  document.getElementById(`${repair}Labour`).innerText = `Labour estimate: ${labourTime} hr${labourTime>1?'s':''}`;
}

// Attach events
document.querySelectorAll('.partsCost').forEach(input=>{
  input.addEventListener('input', ()=>{
    const repair = input.dataset.repair;
    updateCard(repair);
  });
});

['oledDevice','batteryDevice','chargingDevice'].forEach(id=>{
  document.getElementById(id).addEventListener('change', ()=>{
    updateCard(id.replace('Device',''));
  });
});
</script>

</body>
</html>