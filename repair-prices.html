<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Repair Price Calculators</title>

<style>
body{
  margin:0;
  font-family:Inter,system-ui;
  background:#f1f5f9;
  padding:20px;
  color:#0f172a;
}

.wrapper{
  max-width:1200px;
  margin:auto;
  text-align:center;
}

h1{
  margin-bottom:6px;
}

.tagline{
  font-weight:bold;
  font-size:14px;
  margin-bottom:24px;
}

.calculators{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:16px;
}

.card{
  background:#ffffff;
  border-radius:16px;
  padding:20px;
  display:flex;
  flex-direction:column;
  align-items:center;
  box-shadow:0 10px 20px rgba(0,0,0,.08);
}

/* KEY FIX */
.card-header{
  min-height:180px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  width:100%;
}

.card h2{
  margin:10px 0 4px;
}

.card small{
  color:#64748b;
  font-size:13px;
}

.info{
  font-size:12px;
  color:#64748b;
  margin-top:4px;
  text-align:center;
}

.customer-warning{
  font-size:12px;
  color:#dc2626;
  margin-top:6px;
  line-height:1.35;
  text-align:center;
}

input[type="number"], select{
  margin-top:10px;
  padding:9px;
  width:85%;
  border-radius:10px;
  border:1px solid #e5e7eb;
  font-size:14px;
}

.result{
  margin-top:12px;
  font-weight:600;
  font-size:18px;
}

.margin{
  margin-top:4px;
  font-size:14px;
}

.margin.red{color:#dc2626;}
.margin.amber{color:#f59e0b;}
.margin.green{color:#16a34a;}

.labour{
  margin-top:4px;
  font-size:13px;
  color:#2563eb;
}
</style>
</head>

<body>

<div class="wrapper">
  <h1>Repair Price Calculators</h1>

  <div class="tagline">
    Use replacebase.co.uk for parts cost. Console prices are from the website here:
    <a href="https://cnlsrepair.co.uk/repairs/console-repairs/" target="_blank">Console Prices</a>
  </div>

  <div class="calculators">

    <!-- LCD -->
    <div class="card">
      <div class="card-header">
        <h2>LCD Screen Repair</h2>
        <small>iPhone Only</small>
        <div class="info">Only use the red FX5 Screen option cost here</div>
        <div class="customer-warning">
          ⚠️ Customers may see a message saying the replacement screen can't be verified. This is normal and will disappear after 7 days. Apple parts are paired to the phone when made.
        </div>
      </div>

      <input type="number" placeholder="Parts cost (£)" class="partsCost" data-repair="lcd">
      <div class="result" id="lcdResult">Quote: £0</div>
      <div class="margin" id="lcdMargin">Margin: £0</div>
      <div class="labour" id="lcdLabour">Labour estimate: 1 hr</div>
    </div>

    <!-- OLED -->
    <div class="card">
      <div class="card-header">
        <h2>OLED Screen Repair</h2>
        <select id="oledDevice">
          <option value="iPhone">iPhone</option>
          <option value="Android">Android</option>
        </select>
        <div class="info">Only use the purple FX5 Screen option cost here - iPhone</div>
        <div id="oledWarning" class="customer-warning">
          ⚠️ Customers may see a message saying the replacement screen can't be verified. This is normal and will disappear after 7 days. Apple parts are paired to the phone when made.
        </div>
      </div>

      <input type="number" placeholder="Parts cost (£)" class="partsCost" data-repair="oled">
      <div class="result" id="oledResult">Quote: £0</div>
      <div class="margin" id="oledMargin">Margin: £0</div>
      <div class="labour" id="oledLabour">Labour estimate: 1 hr</div>
    </div>

    <!-- Battery -->
    <div class="card">
      <div class="card-header">
        <h2>Battery Repair</h2>
        <select id="batteryDevice">
          <option value="iPhone">iPhone</option>
          <option value="Android">Android</option>
        </select>
        <div id="batteryWarning" class="customer-warning">
          ⚠️ Customers may see a message saying the replacement battery can't be verified. This is normal and will disappear after 7 days. Apple parts are paired to the phone when made.
        </div>
      </div>

      <input type="number" placeholder="Parts cost (£)" class="partsCost" data-repair="battery">
      <div class="result" id="batteryResult">Quote: £0</div>
      <div class="margin" id="batteryMargin">Margin: £0</div>
      <div class="labour" id="batteryLabour">Labour estimate: 1 hr</div>
    </div>

    <!-- Charging -->
    <div class="card">
      <div class="card-header">
        <h2>Charging Port Repair</h2>
        <select id="chargingDevice">
          <option value="iPhone">iPhone</option>
          <option value="Android">Android</option>
        </select>
      </div>

      <input type="number" placeholder="Parts cost (£)" class="partsCost" data-repair="charging">
      <div class="result" id="chargingResult">Quote: £0</div>
      <div class="margin" id="chargingMargin">Margin: £0</div>
      <div class="labour" id="chargingLabour">Labour estimate: 2 hrs</div>
    </div>

  </div>
</div>

<script>
const config = {
  lcd:{percent:130, labour:1},
  oled:{percent:45, labour:{iPhone:1,Android:1.5}},
  battery:{percent:115, labour:{iPhone:1,Android:1}},
  charging:{percent:80, labour:{iPhone:2,Android:1}}
};

function round5(n){ return Math.round(n/5)*5; }

function calc(type, cost, device){
  let q = round5(cost * (1 + config[type].percent/100) + 3);
  let margin = q - cost;
  let labour = typeof config[type].labour === 'object'
    ? config[type].labour[device]
    : config[type].labour;
  return {q, margin, labour};
}

function update(type){
  const input = document.querySelector(`.partsCost[data-repair="${type}"]`);
  const cost = parseFloat(input.value)||0;
  const device = document.getElementById(type+'Device')?.value;
  const {q,margin,labour} = calc(type,cost,device);

  document.getElementById(type+'Result').innerText = `Quote: £${q}`;
  const m = document.getElementById(type+'Margin');
  m.innerText = `Margin: £${margin}`;
  m.className = 'margin ' + (margin<10?'red':margin<20?'amber':'green');
  document.getElementById(type+'Labour').innerText = `Labour estimate: ${labour} hr${labour>1?'s':''}`;
}

document.querySelectorAll('.partsCost').forEach(i=>{
  i.addEventListener('input',()=>update(i.dataset.repair));
});

['oled','battery','charging'].forEach(r=>{
  document.getElementById(r+'Device').addEventListener('change',()=>{
    update(r);
    document.getElementById(r+'Warning')?.style.display =
      document.getElementById(r+'Device').value==='iPhone'?'block':'none';
  });
});
</script>

</body>
</html>
