<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Daily Repairs</title>

<style>
:root{
  --bg:#f1f5f9;
  --panel:#ffffff;
  --border:#e5e7eb;
  --text:#0f172a;
  --muted:#64748b;
  --amber:#f59e0b;
  --green:#16a34a;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Inter,system-ui;
  background:
    radial-gradient(1200px 400px at top center,#e0e7ff 0%,transparent 60%),
    var(--bg);
  background-repeat:no-repeat;
  background-attachment:fixed;
  color:var(--text);
  padding:36px 20px;
}

.wrapper{
  max-width:900px;
  margin:auto;
}

/* PANEL */
.panel{
  background:var(--panel);
  border-radius:22px;
  overflow:hidden;
  box-shadow:0 30px 60px rgba(0,0,0,.12);
  padding:28px 24px;
}

/* PANEL HEADER */
.panel-header{
  text-align:center;
  margin-bottom:20px;
}

.panel-header h1{
  margin:0;
  font-size:20px;
}

.panel-header p{
  margin:4px 0 0;
  font-size:13px;
  color:var(--muted);
}

/* HEADER BUTTONS */
.header-right{
  display:flex;
  justify-content:flex-end;
  gap:12px;
  margin-bottom:20px;
}

/* BUTTONS */
.action-btn{
  background:#2563eb;
  color:#fff;
  border:none;
  border-radius:8px;
  padding:6px 14px;
  cursor:pointer;
}

.secondary{
  background:#e5e7eb;
  color:#0f172a;
}

/* TABLE */
table{
  width:100%;
  border-collapse:collapse;
  text-align:center; /* center all cells */
}

th,td{
  padding:12px 16px;
  border-bottom:1px solid var(--border);
}

th{
  background:#f8fafc;
  font-size:12px;
  color:var(--muted);
  position:sticky;
  top:0;
}

tbody tr:hover{background:#f8fafc}

/* FORM */
input, select{
  padding:6px;
  border-radius:8px;
  border:1px solid var(--border);
  margin-right:8px;
  flex:1;
  min-width:120px;
}

form{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin-bottom:20px;
}

/* Status colors */
.status-open{
  background:var(--amber);
  color:#fff;
  font-weight:600;
  border-radius:6px;
  padding:2px 6px;
}

.status-completed{
  background:var(--green);
  color:#fff;
  font-weight:600;
  border-radius:6px;
  padding:2px 6px;
}
</style>
</head>

<body>
<div class="wrapper">

  <div class="panel">
    <div class="panel-header">
      <h1>Daily Repairs Check-In</h1>
      <p>Track items and status notes for each user</p>
    </div>

    <div class="header-right">
      <button class="action-btn secondary" onclick="window.location.href='index.html'">â¬… Back to Inventory</button>
    </div>

    <form id="repair-form">
      <input type="text" id="username" placeholder="Username" required>
      <input type="text" id="item" placeholder="Item" required>
      <input type="text" id="status-notes" placeholder="Status notes" required>
      <select id="status" required>
        <option value="open">Open</option>
        <option value="completed">Completed</option>
      </select>
      <button type="submit" class="action-btn">Add Entry</button>
    </form>

    <table>
      <thead>
        <tr>
          <th>Username</th>
          <th>Item</th>
          <th>Status Notes</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody id="repair-entries"></tbody>
    </table>
  </div>

</div>

<script>
const form = document.getElementById('repair-form');
const tbody = document.getElementById('repair-entries');

// Load existing entries from LocalStorage
let repairs = JSON.parse(localStorage.getItem('repairs') || '[]');

// Render table
function renderRepairs(){
  tbody.innerHTML = '';
  repairs.forEach((r, index) => {
    const row = document.createElement('tr');

    // Determine status class for color
    const statusClass = r.status === 'completed' ? 'status-completed' : 'status-open';

    row.innerHTML = `
      <td>${r.username}</td>
      <td>${r.item}</td>
      <td>${r.statusNotes}</td>
      <td>
        <select data-index="${index}" class="${statusClass}">
          <option value="open" ${r.status === 'open' ? 'selected' : ''}>Open</option>
          <option value="completed" ${r.status === 'completed' ? 'selected' : ''}>Completed</option>
        </select>
      </td>
    `;
    tbody.appendChild(row);
  });

  // Add event listeners to dropdowns for inline editing
  document.querySelectorAll('#repair-entries select').forEach(sel => {
    sel.addEventListener('change', function(){
      const idx = this.getAttribute('data-index');
      repairs[idx].status = this.value;
      localStorage.setItem('repairs', JSON.stringify(repairs));

      // Update color class
      this.className = this.value === 'completed' ? 'status-completed' : 'status-open';
    });
  });
}

// Initial render
renderRepairs();

// Handle form submission
form.addEventListener('submit', function(e){
  e.preventDefault();

  const username = document.getElementById('username').value.trim();
  const item = document.getElementById('item').value.trim();
  const statusNotes = document.getElementById('status-notes').value.trim();
  const status = document.getElementById('status').value;

  if(!username || !item || !statusNotes) return;

  repairs.push({username, item, statusNotes, status});
  localStorage.setItem('repairs', JSON.stringify(repairs));
  renderRepairs();
  form.reset();
});
</script>

</body>
</html>
